<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Turn Back Time ‚Äî Us üíó</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <!-- Helps performance -->
  <link rel="preload" as="image" href="background.jpg" />

  <style>
    :root{
      --bg:#0d0a0b;
      --panel: rgba(22,17,19,.62);
      --panel2: rgba(13,10,11,.40);
      --text:#f5efe6;
      --muted:#a89788;
      --rose:#c97b84;
      --rose2:#e8a598;
      --gold:#d4af37;
      --border: rgba(245,239,230,.10);
      --border2: rgba(201,123,132,.28);
      --shadow: 0 14px 60px rgba(0,0,0,.42);
      --bg-photo: url("background.jpg");
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family:Outfit, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:var(--bg);
      overflow-x:hidden;
    }

    /* Background (ken burns + overlay) */
    body::before{
      content:"";
      position:fixed; inset:-40px;
      background: var(--bg-photo) center/cover no-repeat;
      filter:saturate(1.05) contrast(1.06);
      transform:scale(1.08);
      z-index:-3;
      animation: ken 22s ease-in-out infinite alternate;
      will-change: transform;
    }
    body::after{
      content:"";
      position:fixed; inset:0;
      z-index:-2;
      pointer-events:none;
      background:
        radial-gradient(ellipse 80% 55% at 50% 20%, rgba(201,123,132,0.22) 0%, transparent 55%),
        linear-gradient(to bottom, rgba(13,10,11,0.82), rgba(13,10,11,0.92));
    }
    @keyframes ken{from{transform:scale(1.07) translate(0,0)}to{transform:scale(1.16) translate(-12px,-10px)}}

    /* subtle noise */
    .noise{
      position:fixed; inset:0; pointer-events:none; z-index:5;
      opacity:.035;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    }

    .wrap{width:min(980px, calc(100% - 2rem)); margin:0 auto;}
    .panel{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:26px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* Start Screen */
    .start{
      position:fixed; inset:0; z-index:9999;
      display:grid; place-items:center;
      background: rgba(13,10,11,.92);
      transition: opacity .55s ease, transform .55s ease;
    }
    .start.hide{opacity:0; pointer-events:none; transform:scale(1.02);}
    .startCard{
      width:min(720px, calc(100% - 2rem));
      padding: 2.2rem 1.6rem;
      text-align:center;
      border-radius:26px;
      background: rgba(22,17,19,.70);
      border:1px solid rgba(245,239,230,.12);
      box-shadow: 0 20px 80px rgba(0,0,0,.55);
      transform: translateY(10px);
      animation: popIn .9s cubic-bezier(.2,.9,.2,1) forwards;
    }
    @keyframes popIn{to{transform:translateY(0)}}
    .startTitle{
      font-family:"Cormorant Garamond", serif;
      font-size: clamp(2.2rem, 6vw, 3.4rem);
      font-weight:400;
      margin-bottom:.45rem;
    }
    .startSub{
      color: var(--rose2);
      letter-spacing:.22em;
      text-transform:uppercase;
      font-weight:300;
      margin-bottom:1.2rem;
      font-size:.95rem;
    }
    .startMini{
      color: var(--muted);
      line-height:1.8;
      font-weight:300;
      margin: 0 auto 1.6rem;
      max-width: 54ch;
    }
    .startBtn{
      border:none;
      cursor:pointer;
      padding: 1rem 2.2rem;
      border-radius:999px;
      font-weight:600;
      letter-spacing:.06em;
      background: linear-gradient(135deg, var(--rose), var(--rose2));
      color: #140f10;
      box-shadow: 0 0 0 rgba(201,123,132,.0);
      transform: translateY(0);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .startBtn:hover{transform: translateY(-2px); box-shadow: 0 0 36px rgba(201,123,132,.45);}
    .tinyHint{margin-top:1rem; font-size:.85rem; color: rgba(245,239,230,.72);}

    /* Floating hearts */
    .hearts{position:fixed; inset:0; z-index:3; pointer-events:none; overflow:hidden;}
    .heart{
      position:absolute;
      font-size: 18px;
      opacity:.0;
      filter: drop-shadow(0 10px 25px rgba(0,0,0,.35));
      animation: floatUp linear forwards;
    }
    @keyframes floatUp{
      0%{transform: translateY(20px) scale(.85); opacity:0}
      10%{opacity:.9}
      100%{transform: translateY(-120vh) scale(1.2); opacity:0}
    }

    /* Hero */
    header{padding: 3.2rem 0 1.6rem;}
    .hero{padding: 2.4rem 1.6rem; text-align:center;}
    .hero h1{
      font-family:"Cormorant Garamond", serif;
      font-size: clamp(2.6rem, 7.2vw, 4.4rem);
      font-weight:400;
      opacity:0;
      animation: fadeUp 1s ease .15s forwards;
    }
    .hero .sub{
      margin-top:.55rem;
      color: var(--rose2);
      letter-spacing:.28em;
      text-transform:uppercase;
      font-weight:300;
      opacity:0;
      animation: fadeUp 1s ease .35s forwards;
    }
    .hero .mini{
      margin-top:1.1rem;
      color: var(--muted);
      line-height:1.9;
      font-weight:300;
      opacity:0;
      animation: fadeUp 1s ease .55s forwards;
    }
    @keyframes fadeUp{from{opacity:0; transform: translateY(16px)}to{opacity:1; transform: translateY(0)}}

    /* Sections */
    section{padding: 1.2rem 0;}
    .sec{padding: 2.0rem 1.4rem;}
    .secTitle{
      font-family:"Cormorant Garamond", serif;
      font-size: clamp(1.75rem, 4.2vw, 2.4rem);
      font-weight:400;
      margin-bottom:.55rem;
    }
    .secSub{color: var(--muted); font-weight:300; line-height:1.8; margin-bottom: 1.3rem;}

    /* Cards (counters) */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }
    .card{
      grid-column: span 6;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 1.15rem 1.15rem;
      transform: translateY(10px);
      opacity:0;
      transition: transform .25s ease, border-color .25s ease, opacity .6s ease;
    }
    .card.visible{opacity:1; transform: translateY(0);}
    .card:hover{transform: translateY(-3px); border-color: var(--border2);}
    .cardTop{display:flex; align-items:baseline; justify-content:space-between; gap:12px; margin-bottom:.35rem;}
    .cardTitle{font-family:"Cormorant Garamond", serif; font-size:1.35rem; font-weight:600;}
    .tag{
      font-size:.85rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color: var(--gold);
      white-space:nowrap;
    }
    .cardText{color: var(--muted); line-height:1.85; font-weight:300;}
    .cardText em{color: var(--rose2); font-family:"Cormorant Garamond", serif; font-style:italic;}

    @media (max-width: 820px){ .card{grid-column: span 12;} }

    /* Timeline */
    .timeline{max-width: 760px; margin: 0 auto;}
    .mile{
      padding: 1.25rem 0 1.8rem;
      opacity:0; transform: translateY(18px);
      transition: opacity .7s ease, transform .7s ease;
    }
    .mile.visible{opacity:1; transform: translateY(0);}
    .mileDate{
      color: var(--gold);
      letter-spacing:.16em;
      text-transform:uppercase;
      font-size:.86rem;
      margin-bottom:.6rem;
      font-weight:600;
    }
    .mileTitle{
      font-family:"Cormorant Garamond", serif;
      font-size: clamp(1.55rem, 3.8vw, 2.2rem);
      font-weight:400;
      margin-bottom:.75rem;
      line-height:1.25;
    }
    .mileText{color: var(--muted); font-weight:300; line-height:1.9;}
    .mileText em{color: var(--rose2); font-family:"Cormorant Garamond", serif; font-style:italic;}
    .divider{
      width: 62px; height: 1px;
      background: linear-gradient(90deg, var(--rose), transparent);
      opacity:.6;
      margin: 1.4rem auto;
    }

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }
    .photo{
      grid-column: span 6;
      position:relative;
      border-radius:20px;
      overflow:hidden;
      background: rgba(0,0,0,.25);
      border:1px solid var(--border);
      min-height: 190px;
      cursor:pointer;
      transform: translateY(14px) scale(.98);
      opacity:0;
      transition: transform .55s cubic-bezier(.2,.9,.2,1), opacity .55s ease, border-color .25s ease;
    }
    .photo.visible{opacity:1; transform: translateY(0) scale(1);}
    .photo:hover{border-color: var(--border2);}
    .photo img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
      transform: scale(1.04);
      transition: transform .35s ease, filter .35s ease;
      filter: saturate(1.02) contrast(1.02);
    }
    .photo:hover img{transform: scale(1.10);}
    .cap{
      position:absolute; left:12px; right:12px; bottom:10px;
      color: rgba(245,239,230,.95);
      text-shadow: 0 10px 30px rgba(0,0,0,.65);
      font-size:.95rem;
      letter-spacing:.02em;
    }
    .pill{
      display:inline-block;
      margin-bottom:.45rem;
      padding:.35rem .7rem;
      border-radius:999px;
      background: rgba(22,17,19,.55);
      border:1px solid rgba(245,239,230,.12);
      font-size:.78rem;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: var(--gold);
      backdrop-filter: blur(8px);
    }
    @media (max-width: 700px){ .photo{grid-column: span 12;} }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0; z-index:9000;
      background: rgba(13,10,11,.94);
      display:flex; align-items:center; justify-content:center;
      padding: 1.2rem;
      opacity:0; pointer-events:none;
      transition: opacity .25s ease;
    }
    .lightbox.show{opacity:1; pointer-events:auto;}
    .lbInner{
      position:relative;
      width:min(980px, 96vw);
      animation: lbPop .28s cubic-bezier(.2,.9,.2,1);
    }
    @keyframes lbPop{from{transform:scale(.96); opacity:.6}to{transform:scale(1); opacity:1}}
    .lightbox img{
      width:100%;
      max-height: 85vh;
      object-fit: contain;
      border-radius: 20px;
      border:1px solid rgba(245,239,230,.12);
      box-shadow: 0 18px 90px rgba(0,0,0,.65);
      background: rgba(0,0,0,.25);
    }
    .lbHint{
      position:fixed; bottom:18px; left:50%;
      transform:translateX(-50%);
      color: rgba(245,239,230,.65);
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:.78rem;
    }

    /* Valentine section */
    .valBox{padding: 2.2rem 1.5rem; text-align:center;}
    .question{
      font-family:"Cormorant Garamond", serif;
      font-size: clamp(1.85rem, 5vw, 2.8rem);
      font-weight:400;
      line-height:1.35;
      margin-bottom: 1.4rem;
    }
    .question span{color: var(--gold); font-style:italic;}
    .btns{display:flex; justify-content:center; gap: 1rem; flex-wrap:wrap;}
    .btn{
      border:none;
      cursor:pointer;
      padding: .95rem 2.3rem;
      border-radius:999px;
      font-weight:600;
      letter-spacing:.05em;
      font-size:1.05rem;
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
      position:relative;
    }
    .yes{
      background: linear-gradient(135deg, var(--rose), var(--rose2));
      color:#140f10;
    }
    .yes:hover{transform: translateY(-2px) scale(1.03); box-shadow: 0 0 36px rgba(201,123,132,.45);}
    .no{
      background: transparent;
      color: rgba(245,239,230,.75);
      border:1px solid rgba(245,239,230,.35);
    }
    .no:hover{border-color: var(--rose); color: var(--rose2);}

    /* Yes overlay */
    .overlay{
      position:fixed; inset:0; z-index:9500;
      display:flex; align-items:center; justify-content:center;
      padding: 1.6rem;
      background: rgba(13,10,11,.94);
      opacity:0; pointer-events:none;
      transition: opacity .35s ease;
    }
    .overlay.show{opacity:1; pointer-events:auto;}
    .ovCard{
      width:min(720px, calc(100% - 2rem));
      padding: 2.1rem 1.6rem;
      text-align:center;
      border-radius:26px;
      background: rgba(22,17,19,.72);
      border:1px solid rgba(245,239,230,.12);
      box-shadow: 0 20px 90px rgba(0,0,0,.6);
      animation: popIn .6s cubic-bezier(.2,.9,.2,1);
    }
    .ovCard h2{
      font-family:"Cormorant Garamond", serif;
      font-size: 2.6rem;
      font-weight:600;
      color: var(--gold);
      margin-bottom:.6rem;
    }
    .ovCard p{color: rgba(245,239,230,.9); font-weight:300; line-height:1.9; font-size:1.05rem;}
    .close{
      margin-top: 1.2rem;
      background: rgba(245,239,230,.08);
      border:1px solid rgba(245,239,230,.16);
      color: rgba(245,239,230,.9);
      padding: .75rem 1.4rem;
      border-radius:999px;
      cursor:pointer;
    }

    /* Rewind */
    .rewind{
      position:fixed; right:16px; bottom:16px; z-index:100;
      display:flex; align-items:center; gap:10px;
      padding: 12px 14px;
      border-radius:999px;
      border:1px solid rgba(245,239,230,.18);
      background: rgba(22,17,19,.62);
      color: rgba(245,239,230,.9);
      backdrop-filter: blur(10px);
      cursor:pointer;
      opacity:0; pointer-events:none;
      transform: translateY(10px);
      transition: opacity .25s ease, transform .25s ease, border-color .25s ease;
    }
    .rewind.show{opacity:1; pointer-events:auto; transform: translateY(0);}
    .rewind:hover{border-color: rgba(201,123,132,.55);}
    .dot{width:8px;height:8px;border-radius:99px;background:var(--rose);box-shadow:0 0 18px rgba(201,123,132,.5); animation:pulse 1.8s ease-in-out infinite;}
    @keyframes pulse{0%,100%{transform:scale(.9);opacity:.6}50%{transform:scale(1.25);opacity:1}}
  </style>
</head>

<body>
  <div class="noise" aria-hidden="true"></div>
  <div class="hearts" id="hearts" aria-hidden="true"></div>

  <!-- Start screen (REQUIRED for music to play on phones) -->
  <div class="start" id="start">
    <div class="startCard">
      <div class="startTitle">Turn Back Time ‚è≥</div>
      <div class="startSub">for us ‚Ä¢ forever</div>
      <div class="startMini">
        Tap once and everything begins ‚Äî photos, counters, and <b>Turn Back Time</b> playing in the background.
        <br/>I made this page with my whole heart.
      </div>
      <button class="startBtn" id="startBtn">Tap to Start üíó</button>
      <div class="tinyHint">(If iPhone asks, tap Play / unmute)</div>
    </div>
  </div>

  <!-- Hidden YouTube player (audio source) -->
  <div id="yt-holder" style="position:fixed; left:-9999px; top:-9999px; width:1px; height:1px; overflow:hidden;">
    <div id="ytplayer"></div>
  </div>

  <button class="rewind" id="rewindBtn" type="button" aria-label="Rewind to top">
    <span class="dot" aria-hidden="true"></span>
    Rewind
  </button>

  <header class="wrap">
    <div class="panel hero">
      <h1>For You, Snigdha</h1>
      <div class="sub">our little forever page</div>
      <div class="mini">
        Every moment with you is a memory I want to live again.
        <br/>One page, one promise ‚Äî <span style="color:var(--rose2);font-family:'Cormorant Garamond',serif;font-style:italic;">you and me, always.</span>
      </div>
    </div>
  </header>

  <!-- COUNTERS -->
  <section class="wrap">
    <div class="panel sec">
      <div class="secTitle">Our Time Together</div>
      <div class="secSub">I count these like a heartbeat‚Ä¶ days, hours, minutes. ü´∂</div>

      <div class="grid">
        <div class="card" data-reveal>
          <div class="cardTop">
            <div class="cardTitle">Talking Again</div>
            <div class="tag" id="sinceTalk">‚Äî</div>
          </div>
          <div class="cardText">Started again on <em>Aug 26, 2024</em>.</div>
        </div>

        <div class="card" data-reveal>
          <div class="cardTop">
            <div class="cardTitle">You Liked Me Back</div>
            <div class="tag" id="sinceLike">‚Äî</div>
          </div>
          <div class="cardText">That day I proposed ‚Äî <em>Sep 7, 2024</em>.</div>
        </div>

        <div class="card" data-reveal>
          <div class="cardTop">
            <div class="cardTitle">You Said ‚ÄúI Love You‚Äù</div>
            <div class="tag" id="sinceLove">‚Äî</div>
          </div>
          <div class="cardText">And my world became complete ‚Äî <em>Oct 1, 2024</em>.</div>
        </div>

        <div class="card" data-reveal>
          <div class="cardTop">
            <div class="cardTitle">Unofficial Married üíç</div>
            <div class="tag" id="sinceMarried">‚Äî</div>
          </div>
          <div class="cardText">Our forever upgrade ‚Äî <em>Jan 17, 2026</em>.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- TIMELINE -->
  <section class="wrap">
    <div class="panel sec timeline">
      <div class="secTitle">Turn Back Time</div>
      <div class="secSub">The chapters that changed my life ‚Äî and made you my home.</div>

      <div class="mile" data-reveal>
        <div class="mileDate">August 26, 2024</div>
        <div class="mileTitle">We started talking again</div>
        <div class="mileText">
          I didn‚Äôt know we were starting something I‚Äôd never want to end.
          Every message felt like coming home. <em>You came back‚Ä¶ and I promised I‚Äôd never take it for granted.</em>
        </div>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="mile" data-reveal>
        <div class="mileDate">September 7, 2024</div>
        <div class="mileTitle">I proposed and you said you like me</div>
        <div class="mileText">
          I put my heart on the line and you didn‚Äôt run. You stayed.
          <em>That yes changed everything.</em>
        </div>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="mile" data-reveal>
        <div class="mileDate">October 1, 2024</div>
        <div class="mileTitle">You said ‚ÄúI love you‚Äù back</div>
        <div class="mileText">
          That day became a permanent part of me.
          <em>I carry your love like a lucky charm.</em>
        </div>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="mile" data-reveal>
        <div class="mileDate">January 17, 2026</div>
        <div class="mileTitle">Unofficial married üíç</div>
        <div class="mileText">
          Not a paper. Not a ceremony. Just us ‚Äî choosing each other so completely it feels like vows.
          <em>My heart calls you ‚Äúwife‚Äù already.</em>
        </div>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="mile" data-reveal>
        <div class="mileDate">And still‚Ä¶</div>
        <div class="mileTitle">I choose you every day</div>
        <div class="mileText">
          Not once. Not sometimes. <em>Every day.</em>
          And I‚Äôll keep choosing you ‚Äî forever.
        </div>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section class="wrap">
    <div class="panel sec">
      <div class="secTitle">Our Memories (tap any photo üíó)</div>
      <!-- <div class="secSub">Your folder must be exactly: <b>Images</b> (capital I). Files: <b>1.jpg ‚Ä¶ 12.jpg</b></div> -->

      <div class="gallery" id="gallery"></div>
    </div>
  </section>

  <!-- VALENTINE -->
  <section class="wrap" style="padding-bottom:2.2rem;">
    <div class="panel valBox" data-reveal>
      <div class="question">
        My love‚Ä¶ <br/>
        will you be my <span>Valentine</span> ‚Äî and my forever? üíò
      </div>
      <div class="btns">
        <button class="btn yes" id="btnYes">Yes üò≠üíó</button>
        <button class="btn no" id="btnNo">No</button>
      </div>
      <div style="margin-top:1.3rem;color:var(--muted);font-weight:300;letter-spacing:.12em;text-transform:uppercase;font-size:.85rem;">
        made with love ‚Äî always
      </div>
    </div>
  </section>

  <!-- YES OVERLAY -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="ovCard">
      <h2>Yayyyy üíçüíó</h2>
      <p>
        You said yes‚Ä¶ again. <br/>
        I‚Äôll spend every day making sure you feel loved, safe, and chosen. <br/>
        <b>Happy Valentine‚Äôs Day, my love.</b> Here‚Äôs to forever and ever.
      </p>
      <button class="close" id="closeOverlay">Close</button>
    </div>
  </div>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lbInner">
      <img id="lbImg" alt="Memory" />
    </div>
    <div class="lbHint">tap anywhere to close</div>
  </div>

  <script>
    /***********************
     * 1) ONLINE MUSIC (YouTube)
     * Needs user tap => we start it from "Tap to Start"
     ***********************/
    // Daniel Schulz - Turn Back Time (YouTube ID)
    // Source: YouTube video for the song :contentReference[oaicite:1]{index=1}
    const YT_VIDEO_ID = "RCYLxaP6Kr0";

    let player = null;
    let ytReady = false;

    function loadYouTubeAPI(){
      return new Promise((resolve) => {
        if (window.YT && window.YT.Player) return resolve();
        const tag = document.createElement("script");
        tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);
        window.onYouTubeIframeAPIReady = () => resolve();
      });
    }

    async function initPlayer(){
      await loadYouTubeAPI();
      player = new YT.Player("ytplayer", {
        width: "1",
        height: "1",
        videoId: YT_VIDEO_ID,
        playerVars: {
          autoplay: 0,
          controls: 0,
          disablekb: 1,
          fs: 0,
          iv_load_policy: 3,
          modestbranding: 1,
          playsinline: 1,
          rel: 0
        },
        events: {
          onReady: () => { ytReady = true; }
        }
      });
    }

    async function startMusic(){
      if (!player) await initPlayer();

      // If still not ready, wait a tick
      const tryPlay = () => {
        try{
          player.unMute();
          player.setVolume(60);
          player.playVideo();
        }catch(e){}
      };

      // Try immediately (user gesture)
      tryPlay();

      // And retry shortly (some phones need it)
      setTimeout(tryPlay, 500);
      setTimeout(tryPlay, 1200);
    }

    /***********************
     * 2) Cute floating hearts
     ***********************/
    const hearts = document.getElementById("hearts");
    const HEARTS = ["üíó","üíò","üíû","üíì","üíñ","‚ú®"];
    function spawnHeart(){
      const el = document.createElement("div");
      el.className = "heart";
      el.textContent = HEARTS[Math.floor(Math.random()*HEARTS.length)];
      const left = Math.random()*100;
      const dur = 6 + Math.random()*5;
      const size = 14 + Math.random()*14;
      el.style.left = left + "vw";
      el.style.bottom = "-20px";
      el.style.fontSize = size + "px";
      el.style.animationDuration = dur + "s";
      el.style.opacity = "0";
      hearts.appendChild(el);
      // remove later
      setTimeout(() => el.remove(), dur*1000);
    }
    function startHearts(){
      spawnHeart();
      setInterval(() => {
        if (document.hidden) return;
        if (Math.random() < 0.7) spawnHeart();
      }, 650);
    }

    /***********************
     * 3) Reveal animations on scroll
     ***********************/
    const revealEls = document.querySelectorAll("[data-reveal]");
    const io = new IntersectionObserver((entries) => {
      entries.forEach((e) => {
        if (e.isIntersecting) e.target.classList.add("visible");
      });
    }, { threshold: 0.12, rootMargin: "0px 0px -10% 0px" });
    revealEls.forEach(el => io.observe(el));

    /***********************
     * 4) Counters: days + hours + minutes
     ***********************/
    function timeSince(dateStr){
      // local midnight start
      const start = new Date(dateStr + "T00:00:00");
      const now = new Date();
      let diff = now - start;
      if (diff < 0) diff = 0;

      const totalMinutes = Math.floor(diff / (1000*60));
      const days = Math.floor(totalMinutes / (60*24));
      const hours = Math.floor((totalMinutes % (60*24)) / 60);
      const minutes = totalMinutes % 60;
      return {days, hours, minutes};
    }
    function fmt(t){ return `${t.days}d ${t.hours}h ${t.minutes}m`; }

    function updateCounters(){
      document.getElementById("sinceTalk").textContent = fmt(timeSince("2024-08-26"));
      document.getElementById("sinceLike").textContent = fmt(timeSince("2024-09-07"));
      document.getElementById("sinceLove").textContent = fmt(timeSince("2024-10-01"));
      document.getElementById("sinceMarried").textContent = fmt(timeSince("2026-01-17"));
    }

    /***********************
     * 5) Gallery (Images/1.jpg ... Images/12.jpg)
     * Replace captions here anytime
     ***********************/
    const captions = [
      { tag:"First Meet", cap:"First meet. First feeling. Forever started here." },
      { tag:"Breathtaking", cap:"I swear the universe took its time creating you." },
      { tag:"First Kiss", cap:"The first time our lips met‚Ä¶ and my heart knew." },
      { tag:"Childhood", cap:"Beautiful then. Beautiful now. Beautiful forever." },
      { tag:"Distance", cap:"No distance could ever reduce what I feel for you." },
      { tag:"Goofy Love", cap:"With you, love is laughter first." },
      { tag:"Safe Place", cap:"I feel calm the moment you‚Äôre near." },
      { tag:"Us", cap:"Two hearts‚Ä¶ one home." },
      { tag:"Hands", cap:"If I‚Äôm holding you, I‚Äôm okay." },
      { tag:"Forever", cap:"I‚Äôll keep choosing you ‚Äî again and again." },
      { tag:"Soft Love", cap:"The kind of love that feels warm and real." },
      { tag:"My Favorite", cap:"You‚Äôre my favorite person in every universe." },
    ];

    const gallery = document.getElementById("gallery");
    function buildGallery(){
      const frag = document.createDocumentFragment();

      for(let i=1;i<=12;i++){
        const data = captions[i-1] || {tag:`Memory ${i}`, cap:""};
        const fig = document.createElement("figure");
        fig.className = "photo";
        fig.setAttribute("data-photo", `Images/${i}.jpg`);
        fig.setAttribute("data-reveal", "");

        const img = document.createElement("img");
        img.src = `Images/${i}.jpg`;
        img.alt = `Memory ${i}`;
        img.loading = "lazy";

        const cap = document.createElement("figcaption");
        cap.className = "cap";
        cap.innerHTML = `<div class="pill">${data.tag}</div><div>${data.cap}</div>`;

        fig.appendChild(img);
        fig.appendChild(cap);
        frag.appendChild(fig);
      }

      gallery.appendChild(frag);

      // observe newly added reveals
      gallery.querySelectorAll("[data-reveal]").forEach(el => io.observe(el));

      // bind lightbox
      bindLightbox();
    }

    /***********************
     * 6) Lightbox
     ***********************/
    const lightbox = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");

    function bindLightbox(){
      document.querySelectorAll("[data-photo]").forEach(el => {
        if (el.__bound) return;
        el.__bound = true;
        el.addEventListener("click", () => {
          const src = el.getAttribute("data-photo");
          lbImg.src = src;
          lightbox.classList.add("show");
          lightbox.setAttribute("aria-hidden","false");
        });
      });
    }
    lightbox.addEventListener("click", () => {
      lightbox.classList.remove("show");
      lightbox.setAttribute("aria-hidden","true");
      lbImg.src = "";
    });

    /***********************
     * 7) Valentine Yes/No
     ***********************/
    const overlay = document.getElementById("overlay");
    const btnYes = document.getElementById("btnYes");
    const btnNo  = document.getElementById("btnNo");
    const closeOverlay = document.getElementById("closeOverlay");

    function showOverlay(){
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden","false");
      // extra hearts burst
      for(let i=0;i<18;i++) setTimeout(spawnHeart, i*60);
    }
    btnYes.addEventListener("click", showOverlay);
    closeOverlay.addEventListener("click", () => {
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
    });

    // No button teasy dodge
    let moveCount = 0;
    btnNo.addEventListener("mouseenter", () => {
      moveCount++;
      const maxMove = 110;
      const left = (Math.random()-0.5)*maxMove*(moveCount>2?1.6:1);
      const top  = (Math.random()-0.5)*maxMove*(moveCount>2?1.6:1);
      btnNo.style.position = "relative";
      btnNo.style.left = `${left}px`;
      btnNo.style.top  = `${top}px`;
    });

    btnNo.addEventListener("click", (e) => {
      e.preventDefault();
      if (moveCount > 2){
        btnNo.textContent = "Okay fine‚Ä¶ YES üíó";
        btnNo.style.left = "";
        btnNo.style.top = "";
        btnNo.classList.remove("no");
        btnNo.classList.add("yes");
        btnNo.addEventListener("click", showOverlay, { once:true });
      } else {
        btnNo.textContent = 'Try "Yes" üòå';
      }
    });

    // ESC closes stuff
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape"){
        lightbox.classList.remove("show");
        overlay.classList.remove("show");
        lbImg.src = "";
      }
    });

    /***********************
     * 8) Rewind
     ***********************/
    const rewindBtn = document.getElementById("rewindBtn");
    window.addEventListener("scroll", () => {
      if (window.scrollY > 500) rewindBtn.classList.add("show");
      else rewindBtn.classList.remove("show");
    });
    rewindBtn.addEventListener("click", () => window.scrollTo({top:0, behavior:"smooth"}));

    /***********************
     * 9) Start button: fixes "tap to start not working"
     * - starts music
     * - starts hearts + counters
     * - unlocks the experience
     ***********************/
    const start = document.getElementById("start");
    const startBtn = document.getElementById("startBtn");

    startBtn.addEventListener("click", async () => {
      // 1) start music (must be inside this click)
      await startMusic();

      // 2) start visuals
      startHearts();
      buildGallery();
      updateCounters();
      setInterval(updateCounters, 30*1000);

      // 3) hide start overlay
      start.classList.add("hide");
      setTimeout(() => start.remove(), 700);
    }, { once:true });

    // If user reloads mid page, keep stable
    window.addEventListener("pageshow", () => {
      // nothing; start overlay ensures proper gesture
    });
  </script>
</body>
</html>
